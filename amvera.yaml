meta:
  name: telegram-bot
  description: "Telegram Bot на Node.js"
  tag: "1.0.0"
  toolchain:
    name: nodejs
    version: "18"
  environment: production
  labels:
    app: telegram-bot
    team: backend

specVersion: "0.0.4"

containers:
  - name: telegram-bot-container
    image:
      name: cr.yandex/ВАШ_REGISTRY_ID/telegram-bot:latest
    command: ["node", "index.js"]
    tty: false
    stdin: false
    
    resources:
      memory: "256MB"
      cpu: "200m"
    
    scalingPolicy:
      minInstances: 1
      maxInstances: 3
    
    env:
      - name: BOT_TOKEN
        value: "ВАШ_ТОКЕН_ОТ_BOTFATHER"
      - name: NODE_ENV
        value: "production"
      - name: PORT
        value: "3000"
    
    ports:
      - containerPort: 3000
        protocol: TCP
    
    probes:
      liveness:
        http:
          path: /health
          port: 3000
        initialDelaySeconds: 30
        periodSeconds: 60
        timeoutSeconds: 10
        successThreshold: 1
        failureThreshold: 3
    
    volumes:
      - name: logs
        mountPath: /app/logs
        type: tmpfs

serviceAccount:
  id: "ВАШ_SERVICE_ACCOUNT_ID"

# Если нужно несколько контейнеров
# containers:
#   - name: bot
#     # ... настройки бота
#   - name: redis
#     image:
#       name: redis:alpine
#     resources:
#       memory: "128MB"
#       cpu: "100m"